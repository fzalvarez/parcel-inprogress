{
    "swagger": "2.0",
    "info": {
        "contact": {}
    },
    "paths": {
        "/manifests/preview": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Construye un manifiesto virtual (preview) basado en parámetros de query. Acepta vehículo, oficina de origen y destino. El preview incluye listado de envíos, totales (cantidad, peso, volumen) y detalles de rutas.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Manifests"
                ],
                "summary": "Construir preview de manifiesto (GET)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del vehículo",
                        "name": "vehicle_id",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID de la oficina de origen",
                        "name": "origin_office_id",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID de la oficina de destino",
                        "name": "destination_office_id",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Preview de manifiesto generado",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: UUID inválido o parámetros faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Vehículo u oficina no encontrados",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Construye un manifiesto virtual (preview) basado en envíos pendientes entre oficinas. Acepta vehículo, oficina de origen y destino. El preview incluye listado de envíos, totales (cantidad, peso, volumen) y detalles de rutas.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Manifests"
                ],
                "summary": "Construir preview de manifiesto (POST)",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "description": "Solicitud de preview con IDs de vehículo y oficinas",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handler.ManifestPreviewRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Preview de manifiesto generado",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: UUID inválido, payload malformado o parámetros faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Vehículo u oficina no encontrados",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lista envíos del tenant con filtros y paginación",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Listar envíos",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "description": "Búsqueda por código o ID",
                        "name": "q",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filtrar por estado (CREATED, REGISTERED, BOARDED, EN_ROUTE, ARRIVED, DELIVERED)",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filtrar por oficina origen (UUID)",
                        "name": "origin_office_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filtrar por oficina destino (UUID)",
                        "name": "destination_office_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filtrar por remitente (UUID)",
                        "name": "sender_person_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filtrar por destinatario (UUID)",
                        "name": "recipient_person_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Filtrar por vehículo (UUID)",
                        "name": "vehicle_id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Desde (RFC3339)",
                        "name": "from_created_at",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Hasta (RFC3339)",
                        "name": "to_created_at",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Límite de resultados (default: 50, max: 200)",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Desplazamiento (default: 0)",
                        "name": "offset",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/handler.ParcelListResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Parámetros inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Crea un nuevo envío en estado CREATED. Requiere tipos de envío, oficinas origen/destino, personas (remitente/destinatario) y opcionales notes. El package_key permite proteger operaciones posteriores con confirmación.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Crear nuevo envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "description": "Solicitud con datos del envío (shipment_type, offices, personas requeridas)",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/dto.CreateParcelRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Envío creado exitosamente en estado CREATED",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: payload malformado o valores inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: offices o personas no válidas, shipment_type no soportado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Devuelve información detallada de un envío incluyendo estado actual, timeline de transiciones, asignación de vehículo/viaje, y auditoria (timestamps y usuarios responsables).",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Obtener detalles completos del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del envío",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/arrive": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Transiciona el envío de estado EN_ROUTE a ARRIVED. Marca la llegada del envío a la oficina de destino final. Requiere confirmación de destination_office_id.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Registrar llegada del envío a destino",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud con destination_office_id (requerido)",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/dto.ArriveParcelRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Envío llegado a destino exitosamente (estado: ARRIVED)",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido o payload malformado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: transición no permitida o estado incompatible",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/board": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Transiciona el envío de estado REGISTERED a BOARDED. Asigna el envío a un vehículo específico y opcionalmente a un viaje/trip. Captura origen_office_id para validación de ruta. Soporta fecha estimada de salida (departure_at).",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Embarcar envío en vehículo",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud con UUID de vehículo (requerido), trip_id y departure_at (opcionales)",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/dto.BoardParcelRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Envío embarcado exitosamente (estado: BOARDED)",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido, payload malformado o UUID inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: transición no permitida, vehículo inválido o estado incompatible",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/deliver": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Transiciona el envío de estado ARRIVED a DELIVERED. Marca la finalización de la cadena de custodia. Requiere confirmación de package_key para seguridad. Captura usuario responsable de la entrega.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Entregar envío al destinatario",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud con package_key para confirmación (requerido)",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/dto.DeliverParcelRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Envío entregado exitosamente (estado: DELIVERED)",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido o payload malformado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: transición no permitida, package_key inválido o estado incompatible",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/depart": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Transiciona el envío de estado BOARDED a EN_ROUTE. Confirma la partida real del vehículo con el envío a bordo. Permite especificar office de salida y timestamp de partida. El vehículo puede ser re-confirmado.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Registrar salida (departure) del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud con office de salida (requerido) y opcionalmente vehículo y timestamp de partida",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/dto.DepartParcelRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Envío en ruta exitosamente (estado: EN_ROUTE)",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido o payload malformado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: transición no permitida o estado incompatible",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/documents/print": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Registra un evento de impresión de documento (LABEL, RECEIPT, MANIFEST, GUIDE) para un envío. El registro incluye tipo de documento, timestamp y usuario que realizó la impresión.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelDocuments"
                ],
                "summary": "Registrar impresión de documento",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud de impresión con tipo de documento",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handler.RegisterPrintRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Impresión registrada exitosamente",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido, payload malformado o tipo de documento no permitido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: estado incompatible o límite de impresiones alcanzado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/documents/prints": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lista todos los registros de impresión asociados a un envío específico. Incluye información de timestamp, tipo de documento e usuario que realizó la impresión.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelDocuments"
                ],
                "summary": "Listar impresiones de envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de registros de impresión",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/items": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lista todos los artículos (items/bultos) agregados a un envío. Devuelve detalles de cada item incluyendo dimensiones, pesos calculados (real, volumétrico, facturable) y precio unitario.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelItems"
                ],
                "summary": "Listar artículos del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de items del envío",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Agrega un bulto/artículo al envío con cálculo automático de peso facturable y precio. Soporta dimensiones opcionales (largo, ancho, alto) para cálculo de peso volumétrico. El peso facturable se calcula como máximo entre peso real y volumétrico (si aplica según configuración del tenant). El precio unitario se busca mediante reglas de precios jerárquicas.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelItems"
                ],
                "summary": "Agregar artículo (item) al envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Datos del item (descripción y peso requeridos, dimensiones opcionales para volumétrico)",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelItemRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Item creado exitosamente con peso y precio calculados",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido, payload malformado o valores inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: regla de precios no encontrada (sugerencia: use comodines *) o estado del envío no permite agregar items",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/items/{item_id}": {
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Elimina un artículo específico agregado a un envío. Solo permitido en ciertos estados del envío (antes de registro o bajo condiciones especiales).",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelItems"
                ],
                "summary": "Eliminar artículo del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del item a eliminar",
                        "name": "item_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Item eliminado exitosamente",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id o item_id inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío o item no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: no se puede eliminar item en este estado del envío",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/payment": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Devuelve los detalles completos del pago registrado para un envío. Incluye tipo de pago, monto, estado (PENDING/PAID), moneda, canal, oficina y datos de caja.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelPayments"
                ],
                "summary": "Obtener información de pago del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Información de pago obtenida",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío o pago no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Crea o actualiza la información de pago del envío. Incluye tipo de pago, monto, moneda, canal, oficina y datos de caja. Soporta múltiples formas de pago (CASH, FOB, CARD, TRANSFER, EWALLET, FREE, COLLECT_ON_DELIVERY). El estado inicial es PENDING.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelPayments"
                ],
                "summary": "Crear o actualizar información de pago",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud con datos de pago (monto requerido, type de pago, moneda por defecto PEN)",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handler.UpsertParcelPaymentRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pago creado o actualizado exitosamente",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido, payload malformado o valores inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: estado incompatible o envío no permite esta operación",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/payment/mark-paid": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Transiciona el pago a estado PAID. Intégrase con el servicio de caja (CASHBOX) para registrar la transacción y confirmar la recaudación. Captura el user_id del operador que marca el pago.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelPayments"
                ],
                "summary": "Marcar pago como realizado",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pago marcado como realizado exitosamente",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío o pago no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: pago ya realizado o estado no permitido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor o fallo de integración con caja",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/register": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Transiciona el envío de estado CREATED a REGISTERED. Marca el envío como listo para ser embarcado en un vehículo. Requiere confirmación de package_key si fue definido al crear.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Registrar envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Envío registrado exitosamente (estado: REGISTERED)",
                        "schema": {
                            "$ref": "#/definitions/handler.CreateParcelResponseEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: transición de estado no permitida (estado actual no es CREATED)",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/summary": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Devuelve una vista consolidada 360° con detalles del envío (parcel), artículos (items), información de pago (payment) e historial de tracking (últimas 20 operaciones). Ideal para dashboards y seguimiento en tiempo real.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Parcels"
                ],
                "summary": "Resumen operativo completo del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Resumen del envío con todos los detalles",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/parcels/{id}/tracking": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lista todos los eventos y cambios de estado registrados para un envío en orden cronológico. Incluye tipo de evento, timestamp, usuario responsable y metadata adicional. Útil para auditoría, debugging y reconstrucción de la cadena de custodia.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "ParcelTracking"
                ],
                "summary": "Listar historial completo de tracking del envío",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID del envío",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historial de tracking del envío",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Envío no encontrado",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/pricing/rules": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Lista todas las reglas de precios activas del tenant actual. Incluye reglas específicas y comodines. Útil para auditoría, depuración y validación de cadenas de precios.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Pricing"
                ],
                "summary": "Listar reglas de precios",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de reglas de precios del tenant",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Crea una nueva regla de precios para el tenant. Soporta comodines (*) en ShipmentType, OriginOfficeID y DestinationOfficeID. La prioridad (0-100) determina el orden de evaluación en búsquedas jerárquicas: específicas primero, luego comodines. Ejemplos: \"STANDARD\", \"*\" para cualquier tipo; \"12345\" (UUID), \"*\" para cualquier oficina.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Pricing"
                ],
                "summary": "Crear regla de precios",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "description": "Solicitud de creación de regla con campos de envío, precio y prioridad",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handler.PriceRuleRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Regla de precios creada exitosamente",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: payload malformado, valores inválidos o formato incorrecto",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: regla duplicada o combinación de parámetros duplicada",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/pricing/rules/{id}": {
            "put": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "Actualiza una regla de precios existente. Permite modificar tipo de envío, oficinas, unidad de precio, precio, moneda y prioridad. Los comodines (*) siguen siendo soportados en campos de rutas. La prioridad define el orden en búsquedas jerárquicas.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Pricing"
                ],
                "summary": "Actualizar regla de precios",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Bearer token",
                        "name": "Authorization",
                        "in": "header"
                    },
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID de la regla",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "Solicitud de actualización con nuevos valores",
                        "name": "payload",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handler.PriceRuleRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Regla de precios actualizada exitosamente",
                        "schema": {
                            "$ref": "#/definitions/handler.AnyDataEnvelope"
                        }
                    },
                    "400": {
                        "description": "Validación fallida: id inválido, payload malformado o valores inválidos",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "No autorizado: token inválido o credenciales faltantes",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Regla no encontrada",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Conflicto: nueva combinación duplicada u estado incompatible",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Error interno del servidor",
                        "schema": {
                            "$ref": "#/definitions/handler.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "apperror.AppError": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "details": {},
                "message": {
                    "type": "string"
                }
            }
        },
        "dto.ArriveParcelRequest": {
            "type": "object",
            "properties": {
                "destination_office_id": {
                    "type": "string"
                }
            }
        },
        "dto.BoardParcelRequest": {
            "type": "object",
            "required": [
                "vehicle_id"
            ],
            "properties": {
                "departure_at": {
                    "type": "string"
                },
                "origin_office_id": {
                    "type": "string"
                },
                "trip_id": {
                    "type": "string"
                },
                "vehicle_id": {
                    "type": "string"
                }
            }
        },
        "dto.CreateParcelRequest": {
            "type": "object",
            "required": [
                "destination_office_id",
                "origin_office_id",
                "recipient_person_id",
                "sender_person_id",
                "shipment_type"
            ],
            "properties": {
                "destination_office_id": {
                    "type": "string"
                },
                "notes": {
                    "type": "string",
                    "maxLength": 200
                },
                "origin_office_id": {
                    "type": "string"
                },
                "package_key": {
                    "type": "string",
                    "maxLength": 50
                },
                "package_key_confirm": {
                    "type": "string",
                    "maxLength": 50
                },
                "recipient_person_id": {
                    "type": "string"
                },
                "sender_person_id": {
                    "type": "string"
                },
                "shipment_type": {
                    "type": "string"
                }
            }
        },
        "dto.CreateParcelResponse": {
            "type": "object",
            "properties": {
                "arrived_at": {
                    "type": "string"
                },
                "arrived_by_user_id": {
                    "type": "string"
                },
                "boarded_at": {
                    "type": "string"
                },
                "boarded_by_user_id": {
                    "type": "string"
                },
                "boarded_departure_at": {
                    "type": "string"
                },
                "boarded_trip_id": {
                    "type": "string"
                },
                "boarded_vehicle_id": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "delivered_at": {
                    "type": "string"
                },
                "delivered_by_user_id": {
                    "type": "string"
                },
                "departed_at": {
                    "type": "string"
                },
                "departed_by_user_id": {
                    "type": "string"
                },
                "destination_office_id": {
                    "type": "string"
                },
                "id": {
                    "type": "string"
                },
                "notes": {
                    "type": "string"
                },
                "origin_office_id": {
                    "type": "string"
                },
                "recipient_person_id": {
                    "type": "string"
                },
                "registered_at": {
                    "type": "string"
                },
                "sender_person_id": {
                    "type": "string"
                },
                "shipment_type": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "dto.DeliverParcelRequest": {
            "type": "object",
            "properties": {
                "package_key": {
                    "type": "string",
                    "maxLength": 50
                }
            }
        },
        "dto.DepartParcelRequest": {
            "type": "object",
            "properties": {
                "departed_at": {
                    "type": "string"
                },
                "departure_office_id": {
                    "type": "string"
                },
                "vehicle_id": {
                    "type": "string"
                }
            }
        },
        "dto.ParcelListPagination": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer"
                },
                "limit": {
                    "type": "integer"
                },
                "offset": {
                    "type": "integer"
                }
            }
        },
        "dto.ParcelListResponse": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/dto.CreateParcelResponse"
                    }
                },
                "pagination": {
                    "$ref": "#/definitions/dto.ParcelListPagination"
                }
            }
        },
        "handler.AnyDataEnvelope": {
            "type": "object",
            "properties": {
                "data": {},
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "handler.CreateParcelItemRequest": {
            "type": "object",
            "required": [
                "description",
                "quantity",
                "weight_kg"
            ],
            "properties": {
                "content_type": {
                    "type": "string",
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "maxLength": 200
                },
                "height_cm": {
                    "type": "number",
                    "maximum": 9999,
                    "minimum": 0.01
                },
                "length_cm": {
                    "type": "number",
                    "maximum": 9999,
                    "minimum": 0.01
                },
                "notes": {
                    "type": "string",
                    "maxLength": 300
                },
                "quantity": {
                    "type": "integer",
                    "maximum": 9999,
                    "minimum": 1
                },
                "unit_price": {
                    "type": "number",
                    "maximum": 999999,
                    "minimum": 0
                },
                "weight_kg": {
                    "type": "number",
                    "maximum": 9999,
                    "minimum": 0.01
                },
                "width_cm": {
                    "type": "number",
                    "maximum": 9999,
                    "minimum": 0.01
                }
            }
        },
        "handler.CreateParcelResponseEnvelope": {
            "type": "object",
            "properties": {
                "data": {
                    "$ref": "#/definitions/dto.CreateParcelResponse"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "handler.ErrorResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "$ref": "#/definitions/apperror.AppError"
                },
                "success": {
                    "type": "boolean",
                    "example": false
                }
            }
        },
        "handler.ManifestPreviewRequest": {
            "type": "object",
            "required": [
                "destination_office_id",
                "origin_office_id",
                "vehicle_id"
            ],
            "properties": {
                "destination_office_id": {
                    "type": "string"
                },
                "origin_office_id": {
                    "type": "string"
                },
                "vehicle_id": {
                    "type": "string"
                }
            }
        },
        "handler.ParcelListResponseEnvelope": {
            "type": "object",
            "properties": {
                "data": {
                    "$ref": "#/definitions/dto.ParcelListResponse"
                },
                "success": {
                    "type": "boolean",
                    "example": true
                }
            }
        },
        "handler.PriceRuleRequest": {
            "type": "object",
            "required": [
                "currency",
                "destination_office_id",
                "origin_office_id",
                "price",
                "shipment_type",
                "unit"
            ],
            "properties": {
                "active": {
                    "type": "boolean"
                },
                "currency": {
                    "type": "string",
                    "enum": [
                        "PEN",
                        "USD"
                    ]
                },
                "destination_office_id": {
                    "type": "string"
                },
                "origin_office_id": {
                    "type": "string"
                },
                "price": {
                    "type": "number"
                },
                "priority": {
                    "type": "integer",
                    "maximum": 100,
                    "minimum": 0
                },
                "shipment_type": {
                    "type": "string"
                },
                "unit": {
                    "type": "string",
                    "enum": [
                        "PER_KG",
                        "PER_ITEM"
                    ]
                }
            }
        },
        "handler.RegisterPrintRequest": {
            "type": "object",
            "required": [
                "document_type"
            ],
            "properties": {
                "document_type": {
                    "type": "string",
                    "enum": [
                        "LABEL",
                        "RECEIPT",
                        "MANIFEST",
                        "GUIDE"
                    ]
                }
            }
        },
        "handler.UpsertParcelPaymentRequest": {
            "type": "object",
            "required": [
                "amount",
                "payment_type"
            ],
            "properties": {
                "amount": {
                    "type": "number"
                },
                "cashbox_id": {
                    "type": "string",
                    "maxLength": 50
                },
                "channel": {
                    "type": "string",
                    "enum": [
                        "COUNTER",
                        "WEB"
                    ]
                },
                "currency": {
                    "type": "string",
                    "enum": [
                        "PEN",
                        "USD"
                    ]
                },
                "notes": {
                    "type": "string",
                    "maxLength": 200
                },
                "office_id": {
                    "type": "string"
                },
                "payment_type": {
                    "type": "string",
                    "enum": [
                        "CASH",
                        "FOB",
                        "CARD",
                        "TRANSFER",
                        "EWALLET",
                        "FREE",
                        "COLLECT_ON_DELIVERY"
                    ]
                },
                "seller_user_id": {
                    "type": "string"
                }
            }
        }
    }
}